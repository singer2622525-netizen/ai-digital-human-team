# Web服务启动问题排查指南

## 🔍 问题诊断

### 错误信息
- **错误代码**：`ERR_CONNECTION_REFUSED`
- **含义**：无法连接到 `localhost:5001`，服务未运行

---

## ✅ 解决方案

### 方法1：使用启动脚本（推荐）

```bash
# 1. 切换到项目根目录
cd "/Users/a1/Documents/Projects/cursor/00-00软件工程事业部（AI 数字人队伍）"

# 2. 运行启动脚本
./启动Web界面.sh
```

### 方法2：手动启动

```bash
# 1. 切换到web_interface目录
cd "03-技术实现/02-功能模块/web_interface"

# 2. 安装依赖（如果需要）
pip3 install -r requirements.txt
pip3 install cryptography

# 3. 启动应用
python3 app.py
```

---

## 🔧 常见问题

### 1. 端口被占用

**检查端口占用**：
```bash
lsof -i :5001
```

**如果端口被占用**：
- 停止占用端口的进程
- 或者修改 `app.py` 中的端口号（默认5001）

### 2. Python环境问题

**检查Python版本**：
```bash
python3 --version
```

**应该使用Python 3.7+**

### 3. 依赖缺失

**安装所有依赖**：
```bash
cd "03-技术实现/02-功能模块/web_interface"
pip3 install -r requirements.txt
pip3 install cryptography
```

### 4. 路径问题（中文路径）

**使用绝对路径启动**：
```bash
cd "/Users/a1/Documents/Projects/cursor/00-00软件工程事业部（AI 数字人队伍）"
bash 启动Web界面.sh
```

---

## 📋 启动成功标志

启动成功后，你应该看到：

```
🚀 Flask应用启动中...
📍 访问地址:
   - 统一管理平台: http://localhost:5001/
   - 🌟 智能产品规划师: http://localhost:5001/smart-planner
   - 任务管理: http://localhost:5001/tasks
   ...
 * Running on http://0.0.0.0:5001
```

---

## 🎯 验证服务运行

### 方法1：浏览器访问
打开浏览器，访问：`http://localhost:5001`

### 方法2：命令行测试
```bash
curl http://localhost:5001/
```

### 方法3：检查进程
```bash
ps aux | grep "python.*app.py" | grep -v grep
```

---

## ⚠️ 注意事项

1. **保持终端窗口打开**：Web服务需要在终端中运行，关闭终端会停止服务
2. **使用Ctrl+C停止**：在运行服务的终端按 `Ctrl+C` 可以停止服务
3. **后台运行**：如果需要后台运行，可以使用 `nohup` 或 `screen`/`tmux`

---

## 🆘 如果仍然无法启动

1. **检查Python环境**：确保Python3已正确安装
2. **检查依赖**：确保所有依赖都已安装
3. **查看错误日志**：启动时的错误信息会显示在终端
4. **检查防火墙**：确保防火墙没有阻止5001端口

---

## 📞 下一步

服务启动成功后：
1. 访问 `http://localhost:5001/` 查看主页
2. 访问 `http://localhost:5001/smart-planner` 使用智能产品规划师
3. 验证所有9个数字人都能正确显示
