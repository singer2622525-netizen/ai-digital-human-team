# RAGFlow配置更新说明

## ✅ 已更新的配置

根据你提供的RAGFlow部署信息，我已经更新了以下配置：

### 1. RAGFlow访问地址
- **原配置**：`http://your-dell-server-ip:9380`
- **新配置**：`https://ragflow.suuntoyun.com`
- **备用地址**：`http://119.130.140.184:9380`

### 2. 更新的文件
- ✅ `知识库建设操作指南.md` - 更新了访问地址
- ✅ `知识库建设快速开始.md` - 更新了环境变量配置
- ✅ `ragflow_client.py` - 修复了URL处理逻辑
- ✅ 新增 `RAGFlow服务器信息.md` - 记录了服务器连接信息

---

## 🔧 需要你确认的信息

### 1. API认证方式
RAGFlow是否需要API密钥？
- 如果**不需要**：可以留空 `RAGFLOW_API_KEY=`
- 如果**需要**：需要在RAGFlow Web界面中获取API密钥

### 2. API端点格式
RAGFlow的API端点可能因版本而异，当前配置为：
- 基础URL：`https://ragflow.suuntoyun.com`
- API路径：`/api/v1/...`

如果API调用失败，可能需要调整端点格式。

---

## 🧪 测试步骤

### 第一步：测试Web界面访问
```bash
# 在浏览器中访问
open https://ragflow.suuntoyun.com
```

### 第二步：测试API连接
```bash
cd "04-知识库建设/06-RAGFlow配置"

# 先设置环境变量
export RAGFLOW_BASE_URL=https://ragflow.suuntoyun.com
# export RAGFLOW_API_KEY=your-api-key  # 如果需要

# 运行测试脚本
python3 test_ragflow_connection.py
```

### 第三步：创建知识库
```bash
# 如果连接测试通过，创建知识库
python3 create_knowledge_bases.py
```

---

## 📝 环境变量配置示例

在 `~/DeveloperConfig/环境变量/.env.work` 中添加：

```bash
# RAGFlow配置
RAGFLOW_BASE_URL=https://ragflow.suuntoyun.com
# 如果域名不可用，使用公网IP
# RAGFLOW_BASE_URL=http://119.130.140.184:9380

# API密钥（如果需要，否则留空）
RAGFLOW_API_KEY=

# API版本
RAGFLOW_API_VERSION=v1
```

---

## ⚠️ 注意事项

1. **HTTPS vs HTTP**：
   - 域名使用HTTPS：`https://ragflow.suuntoyun.com`
   - 公网IP使用HTTP：`http://119.130.140.184:9380`

2. **API端点**：
   - 如果API调用失败，可能需要检查RAGFlow的API文档
   - 不同版本的RAGFlow可能有不同的API端点格式

3. **认证方式**：
   - 某些RAGFlow部署可能需要登录认证
   - 如果API调用需要认证，可能需要使用Session或Token

---

## 🚀 下一步

1. **测试连接**：运行 `test_ragflow_connection.py` 验证配置
2. **创建知识库**：如果连接成功，运行 `create_knowledge_bases.py`
3. **导入知识**：运行 `import_initial_knowledge.py` 导入初始文档

---

**如果遇到问题，请告诉我具体的错误信息，我会帮你解决！**
