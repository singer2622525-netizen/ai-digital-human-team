# RAGFlow 知识库规划

## 🎯 知识库架构

### 知识库部署
- **平台**：RAGFlow
- **部署位置**：公司Dell服务器
- **访问方式**：远程API（公司Mac和家里Mac都可以访问）
- **管理方式**：Web界面管理 + API调用

---

## 📚 知识库分类体系

### 1. 组织架构知识库
**用途**：存储组织架构相关的知识
- 组织架构设计文档
- 岗位职责定义
- 流程设计文档
- 协作机制说明

**知识库名称**：`organization_knowledge`

### 2. 项目经验知识库
**用途**：存储项目执行过程中的经验
- 项目成功经验
- 项目失败教训
- 问题解决方案
- 最佳实践

**知识库名称**：`project_experience`

### 3. 技术知识库
**用途**：存储技术相关的知识
- 技术选型文档
- 技术方案设计
- 技术实现经验
- 技术问题解决方案

**知识库名称**：`technical_knowledge`

### 4. 业务知识库
**用途**：存储业务相关的知识
- 业务需求分析
- 业务流程设计
- 业务规则定义
- 业务场景说明

**知识库名称**：`business_knowledge`

### 5. 数字人知识库
**用途**：存储数字人相关的知识
- 数字人角色定义
- 数字人工作模式
- 数字人协作经验
- 数字人能力评估

**知识库名称**：`digital_human_knowledge`

### 6. 错误知识库
**用途**：存储错误和教训
- 错误记录
- 错误原因分析
- 错误解决方案
- 错误预防措施

**知识库名称**：`error_knowledge`

### 7. 最佳实践知识库
**用途**：存储最佳实践和闪光点
- 闪光点记录
- 成功经验总结
- 最佳实践文档
- 可复用方案

**知识库名称**：`best_practices`

### 8. 公司发展知识库
**用途**：存储公司发展相关的知识
- 公司战略分析
- 业务发展趋势
- 项目关联分析
- 战略建议

**知识库名称**：`company_development`

---

## 🔄 知识库使用流程

### 知识入库流程
```
数字人工作/项目执行
    ↓
智能产品规划师：识别有价值的知识
    ↓
智能产品规划师：分类和标签化
    ↓
智能产品规划师：通过API保存到RAGFlow
    ↓
RAGFlow：自动解析和索引
    ↓
知识可用于检索
```

### 知识检索流程
```
数字人需要知识
    ↓
通过API调用RAGFlow
    ↓
RAGFlow：RAG检索相关知识
    ↓
返回相关知识和上下文
    ↓
数字人使用知识
```

---

## 📋 知识库初始化清单

### 需要创建的知识库
- [ ] organization_knowledge（组织架构知识库）
- [ ] project_experience（项目经验知识库）
- [ ] technical_knowledge（技术知识库）
- [ ] business_knowledge（业务知识库）
- [ ] digital_human_knowledge（数字人知识库）
- [ ] error_knowledge（错误知识库）
- [ ] best_practices（最佳实践知识库）
- [ ] company_development（公司发展知识库）

### 需要导入的初始知识
- [ ] 组织架构设计文档
- [ ] 智能产品规划师角色定义
- [ ] 其他数字人角色定义
- [ ] 技术选型文档
- [ ] 项目章程

---

## 🔧 API集成方案

### RAGFlow API使用
```python
# RAGFlow API调用示例
import requests

RAGFLOW_API_URL = "http://your-dell-server:9380/api/v1"
RAGFLOW_API_KEY = "your-api-key"

def save_knowledge(knowledge_base, content, metadata):
    """保存知识到RAGFlow"""
    url = f"{RAGFLOW_API_URL}/knowledge/{knowledge_base}/documents"
    headers = {
        "Authorization": f"Bearer {RAGFLOW_API_KEY}",
        "Content-Type": "application/json"
    }
    data = {
        "content": content,
        "metadata": metadata
    }
    response = requests.post(url, headers=headers, json=data)
    return response.json()

def search_knowledge(knowledge_base, query, top_k=5):
    """从RAGFlow检索知识"""
    url = f"{RAGFLOW_API_URL}/knowledge/{knowledge_base}/search"
    headers = {
        "Authorization": f"Bearer {RAGFLOW_API_KEY}",
        "Content-Type": "application/json"
    }
    data = {
        "query": query,
        "top_k": top_k
    }
    response = requests.post(url, headers=headers, json=data)
    return response.json()
```

---

## 📝 下一步行动

1. **在RAGFlow上创建知识库**
   - 登录RAGFlow Web界面
   - 创建上述8个知识库
   - 配置每个知识库的参数

2. **导入初始知识**
   - 将项目文档导入到相应知识库
   - 验证知识检索功能

3. **配置API访问**
   - 获取RAGFlow API密钥
   - 配置API访问地址
   - 测试API调用

4. **集成到数字人系统**
   - 在智能产品规划师中集成RAGFlow API
   - 实现知识保存和检索功能
   - 测试知识库功能

---

## ✅ 检查清单

- [ ] RAGFlow服务正常运行
- [ ] 8个知识库已创建
- [ ] API访问配置完成
- [ ] 初始知识已导入
- [ ] API调用测试通过
- [ ] 知识检索功能正常
- [ ] 知识保存功能正常
