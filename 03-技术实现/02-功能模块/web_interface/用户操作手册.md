# 📖 AI数字人队伍管理平台 - 用户操作手册

## 📋 目录

1. [系统简介](#系统简介)
2. [快速开始](#快速开始)
3. [功能详解](#功能详解)
   - [3.1 总览页面](#31-总览页面)
   - [3.2 数字人队伍管理](#32-数字人队伍管理)
   - [3.3 任务管理](#33-任务管理)
   - [3.4 工作流管理](#34-可视化)
   - [3.5 可视化](#35-可视化)
   - [3.6 知识库](#36-知识库)
4. [常见问题](#常见问题)
5. [故障排除](#故障排除)

---

## 系统简介

### 🎯 系统概述

AI数字人队伍管理平台是一个智能化的任务管理和协作系统，通过AI数字人自动完成各种开发任务。

### ✨ 核心特性

- 🤖 **5个AI数字人角色**：项目经理、系统架构师、前端工程师、后端工程师、运维工程师
- 📋 **智能任务管理**：自动分配、执行、跟踪任务
- 🔄 **工作流系统**：预定义工作流模板，一键启动
- 📊 **实时可视化**：任务依赖关系、工作流状态可视化
- 📚 **知识库集成**：自动沉淀知识，智能检索

### 🖥️ 系统要求

- **浏览器**：Chrome、Firefox、Safari、Edge（最新版本）
- **网络**：需要访问 localhost:5001
- **权限**：无需特殊权限

---

## 快速开始

### 步骤1：访问系统

1. 打开浏览器（推荐Chrome）
2. 在地址栏输入：`http://localhost:5001`
3. 按回车键访问

```
┌─────────────────────────────────────────┐
│ 浏览器地址栏                              │
│ http://localhost:5001                   │
└─────────────────────────────────────────┘
```

### 步骤2：查看系统首页

访问成功后，您会看到系统首页：

```
┌─────────────────────────────────────────────────────────────┐
│  🤖 软件工程事业部 - AI数字人队伍管理平台                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [📊 总览] [👥 数字人队伍] [📋 任务管理] [🔄 工作流]        │
│  [📈 可视化] [📚 知识库]                                    │
│                                                             │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐    │
│  │总任务数   │ │已完成    │ │进行中    │ │数字人在线│    │
│  │    0     │ │    0     │ │    0     │ │    5     │    │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘    │
│                                                             │
│  📊 系统概览                                                │
│  ✅ 系统运行正常                                            │
│  ✅ 5 个数字人在线                                          │
│  ✅ WebSocket连接正常                                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 步骤3：开始使用

点击顶部标签页即可开始使用各个功能模块。

---

## 功能详解

## 3.1 总览页面

### 📊 功能说明

总览页面显示系统整体状态和关键指标。

### 🎯 操作步骤

#### 查看系统状态

1. **打开总览页面**
   - 页面加载后自动显示"总览"标签页
   - 或点击顶部导航栏的"📊 总览"按钮

2. **查看统计卡片**
   ```
   ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
   │  总任务数     │ │   已完成     │ │   进行中     │ │  数字人在线  │
   │     15       │ │      8       │ │      5       │ │      5       │
   └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘
   ```

3. **查看系统信息**
   - ✅ 系统运行状态
   - ✅ 数字人在线数量
   - ✅ WebSocket连接状态

#### 快速操作

在总览页面底部有快速操作按钮：

```
┌─────────────────────────────────────┐
│  快速操作                            │
│  [查看任务] [查看数字人] [查看工作流] │
└─────────────────────────────────────┘
```

点击按钮可快速跳转到对应功能页面。

---

## 3.2 数字人队伍管理

### 👥 功能说明

查看和管理AI数字人队伍的状态和工作负载。

### 🎯 操作步骤

#### 查看数字人列表

1. **打开数字人队伍页面**
   - 点击顶部导航栏的"👥 数字人队伍"标签

2. **查看数字人卡片**
   ```
   ┌─────────────────────────────────────┐
   │  项目经理          [空闲]            │
   │  部门: PMO                          │
   │  已完成任务: 12                     │
   │  当前任务: 无                       │
   │  [查看任务]                         │
   └─────────────────────────────────────┘
   ```

3. **数字人状态说明**
   - 🟢 **空闲**：数字人当前没有任务
   - 🟡 **工作中**：数字人正在执行任务
   - 🔴 **错误**：数字人遇到错误

#### 查看数字人任务

1. **点击"查看任务"按钮**
   - 点击数字人卡片底部的"查看任务"按钮
   - 系统会自动跳转到"任务管理"页面
   - 并筛选显示该数字人的任务

---

## 3.3 任务管理

### 📋 功能说明

创建、查看和管理任务。系统会自动将任务分配给合适的数字人。

### 🎯 操作步骤

#### 创建新任务

**步骤1：打开任务管理页面**
- 点击顶部导航栏的"📋 任务管理"标签

**步骤2：点击创建按钮**
```
┌─────────────────────────────────────┐
│  📋 最近任务                        │
│                                     │
│  [➕ 创建新任务]                    │
│                                     │
└─────────────────────────────────────┘
```

**步骤3：填写任务信息**

会弹出创建任务表单：

```
┌─────────────────────────────────────────┐
│  创建新任务                              │
├─────────────────────────────────────────┤
│                                         │
│  任务类型 *                             │
│  [请选择任务类型 ▼]                     │
│    • 创建计划                           │
│    • 设计架构                           │
│    • 前端开发                           │
│    • 后端开发                           │
│    • 部署                               │
│    • 测试                               │
│    • 代码审查                           │
│    • 编写文档                           │
│                                         │
│  优先级 *                               │
│  [中 ▼]                                 │
│    • 低                                 │
│    • 中                                 │
│    • 高                                 │
│    • 紧急                               │
│                                         │
│  任务描述 *                             │
│  ┌─────────────────────────────────┐   │
│  │ 请输入任务描述...                │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  额外信息（JSON格式，可选）              │
│  ┌─────────────────────────────────┐   │
│  │ {"key": "value"}                │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [取消]              [创建任务]         │
└─────────────────────────────────────────┘
```

**步骤4：填写表单**

1. **选择任务类型**
   - 点击"任务类型"下拉框
   - 选择对应的任务类型
   - 系统会根据任务类型自动分配给合适的数字人

2. **选择优先级**
   - 点击"优先级"下拉框
   - 选择：低、中、高、紧急
   - 高优先级任务会优先执行

3. **输入任务描述**
   - 在"任务描述"文本框中输入详细的任务说明
   - 描述越详细，数字人执行效果越好

4. **添加额外信息（可选）**
   - 如果需要添加额外信息，使用JSON格式
   - 例如：`{"deadline": "2025-12-10", "budget": 10000}`
   - 如果不确定，可以留空

**步骤5：提交任务**

1. 点击"创建任务"按钮
2. 系统会显示创建成功提示：
   ```
   ✅ 任务创建成功！
   任务ID: c9cd60f7...
   状态: 待分配
   分配角色: 待分配
   ```
3. 任务会自动出现在任务列表中

#### 查看任务列表

任务列表显示最近24小时的任务：

```
┌─────────────────────────────────────────────────────────────┐
│  任务ID    │ 类型      │ 角色      │ 状态    │ 优先级 │ 时间 │
├─────────────────────────────────────────────────────────────┤
│ c9cd60f7  │ 前端开发  │ 前端工程师│ 进行中  │ 高     │ ... │
│ a1b2c3d4  │ 后端开发  │ 后端工程师│ 已完成  │ 中     │ ... │
│ e5f6g7h8  │ 创建计划  │ 项目经理  │ 待分配  │ 低     │ ... │
└─────────────────────────────────────────────────────────────┘
```

**任务状态说明：**
- 🟡 **待分配**：任务已创建，等待分配给数字人
- 🔵 **已分配**：任务已分配给数字人，等待执行
- 🟢 **进行中**：数字人正在执行任务
- ✅ **已完成**：任务执行完成
- ❌ **失败**：任务执行失败

**优先级说明：**
- 🟢 **低**：普通优先级
- 🟡 **中**：中等优先级（默认）
- 🟠 **高**：高优先级
- 🔴 **紧急**：最高优先级

---

## 3.4 工作流管理

### 🔄 功能说明

工作流是一系列相关任务的组合，可以一键启动整个工作流程。

### 🎯 操作步骤

#### 查看工作流列表

1. **打开工作流页面**
   - 点击顶部导航栏的"🔄 工作流"标签

2. **查看工作流列表**
   ```
   ┌─────────────────────────────────────────────────────┐
   │  工作流名称    │ 状态    │ 步骤数 │ 创建时间 │ 操作 │
   ├─────────────────────────────────────────────────────┤
   │  Web开发流程   │ 运行中  │   5    │ 12-05   │ [查看]│
   │  API开发流程  │ 已完成  │   4    │ 12-04   │ [查看]│
   │  部署流程     │ 已暂停  │   3    │ 12-03   │ [查看]│
   └─────────────────────────────────────────────────────┘
   ```

#### 创建工作流

**方法1：从模板创建（推荐）**

1. **获取可用模板**
   - 系统预定义了多个工作流模板
   - 可以通过API查看：`/api/workflows/templates`

2. **使用API创建工作流**
   ```json
   POST /api/workflows
   {
     "template": "web_development",
     "name": "我的Web开发流程",
     "description": "完整的Web开发工作流"
   }
   ```

**方法2：手动创建**

1. **使用API创建**
   ```json
   POST /api/workflows
   {
     "name": "自定义工作流",
     "description": "工作流描述",
     "steps": [...]
   }
   ```

#### 查看工作流详情

1. **点击"查看"按钮**
   - 在工作流列表中点击"查看"按钮
   - 跳转到工作流详情页面

2. **查看工作流信息**
   ```
   ┌─────────────────────────────────────────┐
   │  📋 工作流详情                            │
   │  ← 返回首页                               │
   ├─────────────────────────────────────────┤
   │                                           │
   │  工作流ID: c0cb2c12-9c2f-4466...         │
   │  模板名称: Web开发流程                    │
   │  状态: [运行中]                          │
   │  创建时间: 2025-12-05 10:30:00           │
   │  更新时间: 2025-12-05 11:15:00          │
   │  步骤数量: 5                             │
   │                                           │
   │  🔄 工作流步骤                            │
   │  ┌─────────────────────────────────┐    │
   │  │ 创建计划        项目经理  [已完成]│    │
   │  │ 设计架构        架构师    [已完成]│    │
   │  │ 前端开发        前端工程师[进行中]│    │
   │  │ 后端开发        后端工程师[待执行]│    │
   │  │ 部署           运维工程师[待执行]│    │
   │  └─────────────────────────────────┘    │
   │                                           │
   │  📊 工作流可视化                          │
   │  [Mermaid流程图显示]                     │
   │                                           │
   │  [启动工作流] [暂停工作流] [恢复工作流]   │
   └─────────────────────────────────────────┘
   ```

#### 管理工作流

**启动工作流**
1. 在工作流详情页面
2. 点击"启动工作流"按钮
3. 系统会开始执行工作流中的第一个步骤

**暂停工作流**
1. 在工作流详情页面
2. 点击"暂停工作流"按钮
3. 工作流会暂停在当前步骤

**恢复工作流**
1. 在工作流详情页面
2. 点击"恢复工作流"按钮
3. 工作流会从暂停的步骤继续执行

---

## 3.5 可视化

### 📈 功能说明

可视化页面显示任务依赖关系和工作流结构图。

### 🎯 操作步骤

#### 查看任务依赖可视化

1. **打开可视化页面**
   - 点击顶部导航栏的"📈 可视化"标签

2. **查看Mermaid流程图**
   ```
   ┌─────────────────────────────────────────┐
   │  📊 任务依赖可视化                       │
   │  [🔄 刷新Mermaid图] [🔄 刷新D3图]        │
   ├─────────────────────────────────────────┤
   │  [Mermaid图] [D3.js图]                  │
   ├─────────────────────────────────────────┤
   │                                           │
   │  ┌─────────────────────────────────┐    │
   │  │                                 │    │
   │  │    [任务1] ──→ [任务2]          │    │
   │  │      │           │              │    │
   │  │      └──→ [任务3]               │    │
   │  │                                 │    │
   │  └─────────────────────────────────┘    │
   │                                           │
   │  图例:                                    │
   │  🟡 待分配  🟢 进行中  ✅ 已完成  ❌ 失败│
   └─────────────────────────────────────────┘
   ```

3. **切换视图**
   - **Mermaid图**：静态流程图，显示任务依赖关系
   - **D3.js图**：交互式图表，可以拖拽节点

4. **刷新图表**
   - 点击"🔄 刷新Mermaid图"或"🔄 刷新D3图"按钮
   - 图表会更新为最新数据

#### 理解可视化图表

**节点颜色说明：**
- 🟡 **黄色**：待分配任务
- 🔵 **蓝色**：进行中任务
- 🟢 **绿色**：已完成任务
- 🔴 **红色**：失败任务

**箭头说明：**
- 箭头表示任务依赖关系
- A → B 表示任务B依赖于任务A
- 只有当A完成后，B才能开始执行

---

## 3.6 知识库

### 📚 功能说明

知识库集成RAGFlow，支持知识检索和自动沉淀。

### 🎯 操作步骤

#### 搜索知识

1. **打开知识库页面**
   - 点击顶部导航栏的"📚 知识库"标签

2. **查看知识库状态**
   ```
   ┌─────────────────────────────────────────┐
   │  📚 知识库功能                            │
   │                                           │
   │  知识库集成RAGFlow，支持知识检索和        │
   │  自动沉淀。                               │
   │                                           │
   │  当前状态: ✅ WebSocket已连接             │
   │                                           │
   │  [搜索知识]                              │
   └─────────────────────────────────────────┘
   ```

3. **点击"搜索知识"按钮**
   - 系统会调用知识库搜索API
   - 返回相关知识点

#### 知识自动沉淀

系统会自动将以下内容沉淀到知识库：
- ✅ 任务执行结果
- ✅ 工作流执行经验
- ✅ 错误处理方案
- ✅ 最佳实践

无需手动操作，系统会自动完成。

---

## 常见问题

### Q1: 如何知道任务是否已分配给数字人？

**A:** 查看任务列表中的"状态"列：
- "待分配"：还未分配
- "已分配"：已分配给数字人
- "进行中"：数字人正在执行

### Q2: 任务创建后多久会被执行？

**A:** 
- 如果数字人空闲，任务会立即分配和执行
- 如果数字人忙碌，任务会排队等待
- 高优先级任务会优先执行

### Q3: 如何查看任务的详细执行日志？

**A:** 
1. 任务执行后，结果会保存在任务对象中
2. 可以通过API查询：`GET /api/tasks/<task_id>`
3. 查看返回的`result`字段

### Q4: 工作流可以暂停吗？

**A:** 可以！
1. 打开工作流详情页面
2. 点击"暂停工作流"按钮
3. 工作流会暂停在当前步骤
4. 可以随时点击"恢复工作流"继续执行

### Q5: WebSocket连接失败怎么办？

**A:** 
- 系统已实现自动重连机制
- 如果连接失败，系统会自动尝试重连（最多5次）
- 如果仍然失败，请检查服务器是否正常运行

### Q6: 如何批量创建任务？

**A:** 
使用批量创建API：
```json
POST /api/tasks/batch
{
  "tasks": [
    {"task_type": "test", "priority": "medium", "input_data": {...}},
    {"task_type": "test", "priority": "high", "input_data": {...}}
  ]
}
```

---

## 故障排除

### 问题1：页面无法打开

**症状：** 浏览器显示"无法访问此网站"

**解决方法：**
1. ✅ 检查服务器是否启动
   ```bash
   # 检查端口5001是否被占用
   lsof -i :5001
   ```
2. ✅ 确认访问地址正确：`http://localhost:5001`
3. ✅ 检查防火墙设置
4. ✅ 重启服务器

### 问题2：任务创建失败

**症状：** 点击"创建任务"后显示错误

**解决方法：**
1. ✅ 检查必填字段是否都已填写
2. ✅ 检查任务类型是否选择
3. ✅ 检查JSON格式是否正确（如果有额外信息）
4. ✅ 查看浏览器控制台的错误信息

### 问题3：WebSocket连接失败

**症状：** 页面显示"WebSocket未连接"

**解决方法：**
1. ✅ 刷新页面（F5）
2. ✅ 检查服务器日志
3. ✅ 确认Flask-SocketIO已正确安装
4. ✅ 检查网络连接

### 问题4：可视化图表不显示

**症状：** 可视化页面显示空白

**解决方法：**
1. ✅ 检查网络连接（需要加载CDN资源）
2. ✅ 点击"刷新Mermaid图"或"刷新D3图"按钮
3. ✅ 查看浏览器控制台是否有错误
4. ✅ 确认有任务数据（如果没有任务，会显示"暂无任务"提示）

### 问题5：数字人状态不更新

**症状：** 数字人状态一直显示"空闲"

**解决方法：**
1. ✅ 检查WebSocket连接状态
2. ✅ 刷新页面
3. ✅ 查看服务器日志
4. ✅ 确认数字人模块正常工作

---

## 📞 技术支持

### 日志文件位置

- **应用日志**：`03-技术实现/02-功能模块/web_interface/app.log`
- **错误日志**：查看浏览器控制台（F12）

### 检查系统状态

访问测试端点：`http://localhost:5001/test`

如果显示"✅ Flask应用运行正常！"，说明服务器正常。

---

## 🎉 开始使用

现在您已经了解了所有功能，可以开始使用系统了！

**推荐使用流程：**

1. 📊 **查看总览** - 了解系统整体状态
2. 📋 **创建任务** - 开始第一个任务
3. 👥 **查看数字人** - 了解谁在执行任务
4. 📈 **查看可视化** - 了解任务依赖关系
5. 🔄 **创建工作流** - 自动化复杂流程

**祝您使用愉快！** 🚀

