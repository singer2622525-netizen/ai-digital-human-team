# å¯†ç æ•°æ®åº“ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

å¯†ç æ•°æ®åº“æ˜¯ä¸€ä¸ªæœ¬åœ°SQLiteæ•°æ®åº“ï¼Œç”¨äºé›†ä¸­ç®¡ç†æ‰€æœ‰æœåŠ¡çš„è´¦å·å¯†ç ã€‚æ•°æ®åŠ å¯†å­˜å‚¨ï¼Œå®‰å…¨å¯æ§ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

```bash
pip install cryptography
```

### ç¬¬äºŒæ­¥ï¼šæ·»åŠ æœåŠ¡

```bash
cd "03-æŠ€æœ¯å®ç°/05-é…ç½®ç®¡ç†"

# æ·»åŠ RAGFlowæœåŠ¡
python credentials_manager.py add-service RAGFlow --type çŸ¥è¯†åº“ --url https://ragflow.suuntoyun.com

# æ·»åŠ å‡­è¯
python credentials_manager.py add-credential RAGFlow --type username_password --key username --value your-username
python credentials_manager.py add-credential RAGFlow --type username_password --key password --value your-password
```

### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨å‡­è¯

```python
from credentials_api import CredentialsAPI

# åˆå§‹åŒ–API
api = CredentialsAPI()

# è·å–RAGFlowå‡­è¯
ragflow_config = api.get_ragflow_config()
print(ragflow_config['base_url'])
print(ragflow_config['credentials'])

# æˆ–è€…è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
api.set_ragflow_env()
# ç°åœ¨å¯ä»¥ä½¿ç”¨ os.environ['RAGFLOW_BASE_URL'] ç­‰
```

---

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### æ·»åŠ æœåŠ¡

```bash
python credentials_manager.py add-service <æœåŠ¡å> --type <ç±»å‹> --url <åœ°å€> --description <æè¿°>
```

**ç¤ºä¾‹**ï¼š
```bash
# æ·»åŠ RAGFlow
python credentials_manager.py add-service RAGFlow --type çŸ¥è¯†åº“ --url https://ragflow.suuntoyun.com

# æ·»åŠ å†…ç½‘ç©¿é€æœåŠ¡
python credentials_manager.py add-service frp --type å†…ç½‘ç©¿é€ --url http://frp.example.com

# æ·»åŠ åŸŸåæœåŠ¡
python credentials_manager.py add-service DuckDNS --type åŸŸåæœåŠ¡ --url https://www.duckdns.org
```

### æ·»åŠ å‡­è¯

```bash
python credentials_manager.py add-credential <æœåŠ¡å> --type <å‡­è¯ç±»å‹> --key <é”®å> --value <å€¼>
```

**ç¤ºä¾‹**ï¼š
```bash
# æ·»åŠ ç”¨æˆ·å
python credentials_manager.py add-credential RAGFlow --type username_password --key username --value myuser

# æ·»åŠ å¯†ç 
python credentials_manager.py add-credential RAGFlow --type username_password --key password --value mypass

# æ·»åŠ APIå¯†é’¥
python credentials_manager.py add-credential RAGFlow --type api_key --key api_key --value abc123
```

### è·å–å‡­è¯

```bash
python credentials_manager.py get-credentials <æœåŠ¡å>
```

**ç¤ºä¾‹**ï¼š
```bash
python credentials_manager.py get-credentials RAGFlow
```

### åˆ—å‡ºæ‰€æœ‰æœåŠ¡

```bash
python credentials_manager.py list-services
```

### åˆ é™¤æœåŠ¡

```bash
python credentials_manager.py delete-service <æœåŠ¡å>
```

---

## ğŸ’» Python APIä½¿ç”¨

### åŸºç¡€ä½¿ç”¨

```python
from credentials_api import CredentialsAPI

# åˆå§‹åŒ–
api = CredentialsAPI()

# è·å–æœåŠ¡é…ç½®
config = api.get_service_config("RAGFlow")
print(config['base_url'])
print(config['credentials'])

# è·å–å‡­è¯ï¼ˆæ‰å¹³åŒ–ï¼‰
credentials = api.get_credentials("RAGFlow")
print(credentials['username'])
print(credentials['password'])
```

### è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡

```python
from credentials_api import CredentialsAPI

api = CredentialsAPI()

# è®¾ç½®RAGFlowç¯å¢ƒå˜é‡
api.set_ragflow_env()

# ç°åœ¨å¯ä»¥ä½¿ç”¨
import os
print(os.environ['RAGFLOW_BASE_URL'])
print(os.environ['RAGFLOW_USERNAME'])
print(os.environ['RAGFLOW_PASSWORD'])
```

### åœ¨æ•°å­—äººä¸­ä½¿ç”¨

```python
from credentials_api import CredentialsAPI

# åœ¨æ•°å­—äººåˆå§‹åŒ–æ—¶
api = CredentialsAPI()

# è·å–RAGFlowé…ç½®
ragflow_config = api.get_ragflow_config()

# ä½¿ç”¨é…ç½®åˆå§‹åŒ–RAGFlowå®¢æˆ·ç«¯
from ragflow_client import RAGFlowClient
client = RAGFlowClient(
    base_url=ragflow_config['base_url'],
    username=ragflow_config['credentials']['username_password']['username'],
    password=ragflow_config['credentials']['username_password']['password']
)
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### ä¸»å¯†ç 

- é¦–æ¬¡ä½¿ç”¨éœ€è¦è®¾ç½®ä¸»å¯†ç 
- ä¸»å¯†ç ç”¨äºåŠ å¯†æ‰€æœ‰æ•æ„Ÿæ•°æ®
- å»ºè®®ä½¿ç”¨å¼ºå¯†ç 
- å¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ `CREDENTIALS_MASTER_PASSWORD` é¿å…æ¯æ¬¡è¾“å…¥

### æ•°æ®åŠ å¯†

- æ‰€æœ‰å¯†ç ä½¿ç”¨Fernetå¯¹ç§°åŠ å¯†
- åŠ å¯†å¯†é’¥ç”±ä¸»å¯†ç ç”Ÿæˆ
- æ•°æ®åº“æ–‡ä»¶æƒé™ï¼š600ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯è¯»å†™ï¼‰

### å¤‡ä»½å»ºè®®

```bash
# å¤‡ä»½æ•°æ®åº“æ–‡ä»¶ï¼ˆé¡¹ç›®å†…ï¼‰
cd "03-æŠ€æœ¯å®ç°/05-é…ç½®ç®¡ç†/å¯†ç æ•°æ®åº“"
cp credentials.db credentials.db.backup

# æˆ–è€…å¤‡ä»½æ•´ä¸ªå¯†ç æ•°æ®åº“ç›®å½•
cd "03-æŠ€æœ¯å®ç°/05-é…ç½®ç®¡ç†"
tar -czf å¯†ç æ•°æ®åº“å¤‡ä»½_$(date +%Y%m%d).tar.gz å¯†ç æ•°æ®åº“/
```

---

## ğŸ“ æœåŠ¡ç¤ºä¾‹

### RAGFlow

```bash
# æ·»åŠ æœåŠ¡
python credentials_manager.py add-service RAGFlow --type çŸ¥è¯†åº“ --url https://ragflow.suuntoyun.com

# æ·»åŠ å‡­è¯
python credentials_manager.py add-credential RAGFlow --type username_password --key username --value your-username
python credentials_manager.py add-credential RAGFlow --type username_password --key password --value your-password
```

### å†…ç½‘ç©¿é€ï¼ˆfrpï¼‰

```bash
# æ·»åŠ æœåŠ¡
python credentials_manager.py add-service frp --type å†…ç½‘ç©¿é€ --url http://frp.example.com

# æ·»åŠ å‡­è¯
python credentials_manager.py add-credential frp --type username_password --key username --value frp-user
python credentials_manager.py add-credential frp --type username_password --key password --value frp-password
python credentials_manager.py add-credential frp --type other --key server_addr --value frp.example.com
python credentials_manager.py add-credential frp --type other --key server_port --value 7000
```

### åŸŸåæœåŠ¡ï¼ˆDuckDNSï¼‰

```bash
# æ·»åŠ æœåŠ¡
python credentials_manager.py add-service DuckDNS --type åŸŸåæœåŠ¡ --url https://www.duckdns.org

# æ·»åŠ å‡­è¯
python credentials_manager.py add-credential DuckDNS --type token --key token --value your-duckdns-token
python credentials_manager.py add-credential DuckDNS --type domain --key domain --value yourdomain
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šä¸»å¯†ç é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤ä¸»å¯†ç æ­£ç¡®
- å¦‚æœå¿˜è®°ä¸»å¯†ç ï¼Œéœ€è¦é‡æ–°åˆ›å»ºæ•°æ®åº“ï¼ˆæ•°æ®ä¼šä¸¢å¤±ï¼‰

### é—®é¢˜2ï¼šæœåŠ¡ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å…ˆä½¿ç”¨ `add-service` æ·»åŠ æœåŠ¡
- å†ä½¿ç”¨ `add-credential` æ·»åŠ å‡­è¯

### é—®é¢˜3ï¼šæƒé™é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
cd "03-æŠ€æœ¯å®ç°/05-é…ç½®ç®¡ç†/å¯†ç æ•°æ®åº“"
ls -l credentials.db

# è®¾ç½®æ­£ç¡®æƒé™
chmod 600 credentials.db
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è®¾è®¡æ–‡æ¡£**ï¼š`å¯†ç æ•°æ®åº“è®¾è®¡.md`
- **ç¯å¢ƒå˜é‡ç®¡ç†**ï¼š`ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—.md`

---

**å¯†ç æ•°æ®åº“å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼**
